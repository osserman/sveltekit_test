import{w as u}from"./index-97b513d5.js";import{C as h,V as E,W as T,T as V}from"./index-fb2ad01a.js";function j(t){return Object.prototype.toString.call(t)==="[object Date]"}function l(t,r){if(t===r||t!==t)return()=>t;const e=typeof t;if(e!==typeof r||Array.isArray(t)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=r.map((o,n)=>l(t[n],o));return o=>i.map(n=>n(o))}if(e==="object"){if(!t||!r)throw new Error("Object cannot be null");if(j(t)&&j(r)){t=t.getTime(),r=r.getTime();const n=r-t;return s=>new Date(t+s*n)}const i=Object.keys(r),o={};return i.forEach(n=>{o[n]=l(t[n],r[n])}),n=>{const s={};return i.forEach(a=>{s[a]=o[a](n)}),s}}if(e==="number"){const i=r-t;return o=>t+o*i}throw new Error(`Cannot interpolate ${e} values`)}function z(t,r={}){const e=u(t);let i,o=t;function n(s,a){if(t==null)return e.set(t=s),Promise.resolve();o=s;let c=i,p=!1,{delay:A=0,duration:f=400,easing:b=V,interpolate:D=l}=h(h({},r),a);if(f===0)return c&&(c.abort(),c=null),e.set(t=o),Promise.resolve();const y=E()+A;let m;return i=T(d=>{if(d<y)return!0;p||(m=D(t,s),typeof f=="function"&&(f=f(t,s)),p=!0),c&&(c.abort(),c=null);const g=d-y;return g>f?(e.set(t=s),!1):(e.set(t=m(b(g/f))),!0)}),i.promise}return{set:n,update:(s,a)=>n(s(o,t),a),subscribe:e.subscribe}}const w={analytics:1,infoViz:2,mapping:1};function C(){const{subscribe:t,set:r}=z(w,{duration:500});return{subscribe:t,change:e=>r({analytics:e.analytics,infoViz:e.infoViz,mapping:e.mapping}),reset:()=>r(w)}}const H=C(),k=u("all"),x=u(null);export{x as a,k as f,H as h};
